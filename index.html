<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Barchart Playground</title>

    <link rel="stylesheet" href="css/dc.css" type="text/css">
    <style>
        body,
        html {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        div {
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }
    </style>

</head>

<body>

    <div id="paymentChart">

    </div>

    <br>

    <div id="totalChart">

    </div>

    <!-- D3 javascript library -->
    <script type="text/javascript" src="js/d3.js"></script>
    <!-- Crossfilter javascript library -->
    <script type="text/javascript" src="js/crossfilter.js"></script>
    <!-- JS library for printing the data in crossfilter -->
    <script type="text/javascript" src="js/print_filter.js"></script>

    <!-- DC javascript library -->
    <script type="text/javascript" src="js/dc.js"></script>

    <!-- Payments data -->
    <script src="js/payment_data.js" type="text/javascript" charset="utf-8"></script>

    <!-- Crossfilter usage JS -->
    <script type="text/javascript">

        // Type Dimension
        var typeDimension = payments.dimension(function(d) {
            return d.type;
        });

        // Type group with Total from typeDimension
        var typeGroup = typeDimension.group().reduceSum(function (d) {
            return d.total;
        });

        // tipDimension
        var tipDimension = payments.dimension(function(d) {
            return d.tip;
        });

        // Define the barchart for #chart
        dc.barChart("#paymentChart")
            .width(1365)
            .height(200)
            .dimension(typeDimension)
            .group(typeGroup)
            .x(d3.scale.ordinal().domain(['visa', 'cash', 'tab']))
            .xUnits(dc.units.ordinal)
            .barPadding(0.2)
            .outerPadding(0)
            .yAxis().ticks(5);

        // Total dimension
        var totalDimension = payments.dimension(function(d) {
          return d.total;
        });

        // Total group
        var totalGroup = totalDimension.group(function (d) {
            return Math.floor(d/100)*100;
        });

        // define the barchart for #totalchart
        var totalChart = dc.barChart("#totalChart")
        .width(1360)
        .height(200)
        .dimension(totalDimension)
        .group(totalGroup)
        .x(d3.scale.linear().domain([0,400]))
        .xUnits(dc.units.fp.precision(100));

        totalChart.yAxis().ticks(5);
        totalChart.xAxis().ticks(4);

        // Draw the barChart
        dc.renderAll();

    </script>

</body>

</html>
